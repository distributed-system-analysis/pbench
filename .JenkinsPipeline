pipeline {
    agent { label 'pbench' }
    stages {
        stage('Unit Tests') {
            steps {
                echo 'Unit tests for a PR !!'
                sh 'podman --version'
                sh 'buildah --version'
            }
        }
        stage('Linting') {
            steps {
                echo 'Linting ... hi pbench-ci-multi!'
                sh 'podman run -it --name pbench --userns=keep-id --volume $(pwd):/home/pbench:z --rm quay.io/pbench/pbench-devel:jenkins /bin/bash -c \'cd /home/pbench; tox -e lint\''
                echo '... Linted'
            }
        }
    }
}
