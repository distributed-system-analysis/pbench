+++ Running echo
audit archive hierarchy
--- Finished echo (status=0)
+++ Running unit test audit
--- Finished unit test audit (status=6)
+++ var/www/html tree state
/var/tmp/pbench-test-server/var-www-html
/var/tmp/pbench-test-server/var-www-html/pbench-results-host-info.versioned
/var/tmp/pbench-test-server/var-www-html/pbench-results-host-info.versioned/pbench-results-host-info.URL001.active
/var/tmp/pbench-test-server/var-www-html/pbench-results-host-info.versioned/pbench-results-host-info.URL001.maint
/var/tmp/pbench-test-server/var-www-html/pbench-results-host-info.versioned/pbench-results-host-info.URL002.active
/var/tmp/pbench-test-server/var-www-html/pbench-results-host-info.versioned/pbench-results-host-info.URL002.maint
--- var/www/html tree state
+++ pbench tree state
/var/tmp/pbench-test-server/pbench
/var/tmp/pbench-test-server/pbench/archive
/var/tmp/pbench-test-server/pbench/archive/fs-version-001
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/a-wayward-file.txt
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.empty
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.unexp_state_dirs
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.unexp_state_dirs/TO-INDEX
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.unexp_state_dirs/TO-UNPACK
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.unexp_state_dirs/an-unexpected
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.unexp_state_dirs/unexpected
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.0
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.1
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.10
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.11
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.12
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.13
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.14
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.15
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.16
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.17
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.18
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.19
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.2
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.20
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.21
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.22
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.23
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.24
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.25
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.26
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.27
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.28
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.29
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.3
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.30
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.4
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.5
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.6
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.7
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.8
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller.wont_index/WONT-INDEX.9
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/.prefix
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/UNPACKED
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/UNPACKED/benchmark-result-large_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/an-unexpected-symlink
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/benchmark-result-large_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/benchmark-result-large_1900-01-01T00:00:00.tar.xz.md5
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/unexpected-file
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller00/unexpected-symlink
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/.prefix
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/.prefix/a-unexpected
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/.prefix/benchmark-result-medium_1900-01-01T00:00:00.tar.xz.prefix
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/.prefix/prefix.DUPLICATE__NAME.1.benchmark-result-medium_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/.prefix/prefix.benchmark-result-medium_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/.prefix/unexpected
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/DUPLICATE__NAME.1.benchmark-result-medium_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/DUPLICATE__NAME.1.benchmark-result-medium_1900-01-01T00:00:00.tar.xz.md5
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/UNPACKED
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/UNPACKED/DUPLICATE__NAME.1.benchmark-result-medium_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/UNPACKED/benchmark-result-medium_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/benchmark-result-medium_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller01/benchmark-result-medium_1900-01-01T00:00:00.tar.xz.md5
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02/.prefix
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02/.prefix/benchmark-result-small_1900-01-01T00:00:00.prefix
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02/TO-UNPACK
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02/UNPACKED
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02/UNPACKED/benchmark-result-small_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02/benchmark-result-small_1900-01-01T00:00:00.tar.xz
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/controller02/benchmark-result-small_1900-01-01T00:00:00.tar.xz.md5
/var/tmp/pbench-test-server/pbench/archive/fs-version-001/wayward-file.txt
/var/tmp/pbench-test-server/pbench/logs
/var/tmp/pbench-test-server/pbench/logs/pbench-audit-archive
/var/tmp/pbench-test-server/pbench/logs/pbench-audit-archive/pbench-audit-archive.error
/var/tmp/pbench-test-server/pbench/logs/pbench-audit-archive/pbench-audit-archive.log
/var/tmp/pbench-test-server/pbench/public_html
/var/tmp/pbench-test-server/pbench/public_html/incoming
/var/tmp/pbench-test-server/pbench/public_html/incoming/controller00
/var/tmp/pbench-test-server/pbench/public_html/incoming/controller00/benchmark-result-large_1900-01-01T00:00:00
/var/tmp/pbench-test-server/pbench/public_html/incoming/controller01
/var/tmp/pbench-test-server/pbench/public_html/incoming/controller01/benchmark-result-medium_1900-01-01T00:00:00
/var/tmp/pbench-test-server/pbench/public_html/incoming/controller02
/var/tmp/pbench-test-server/pbench/public_html/incoming/controller02/benchmark-result-small_1900-01-01T00:00:00
/var/tmp/pbench-test-server/pbench/public_html/results
/var/tmp/pbench-test-server/pbench/public_html/users
/var/tmp/pbench-test-server/pbench/tmp
/var/tmp/pbench-test-server/pbench/tmp/controller00
/var/tmp/pbench-test-server/pbench/tmp/controller00/benchmark-result-large_1900-01-01T00:00:00
/var/tmp/pbench-test-server/pbench/tmp/controller00/benchmark-result-large_1900-01-01T00:00:00/lines.100.txt
/var/tmp/pbench-test-server/pbench/tmp/controller01
/var/tmp/pbench-test-server/pbench/tmp/controller01/benchmark-result-medium_1900-01-01T00:00:00
/var/tmp/pbench-test-server/pbench/tmp/controller01/benchmark-result-medium_1900-01-01T00:00:00/lines.50.txt
/var/tmp/pbench-test-server/pbench/tmp/controller01/benchmark-result-medium_1900-01-01T00:00:00/metadata.log
--- pbench tree state
+++ pbench-local tree state
/var/tmp/pbench-test-server/pbench-local
/var/tmp/pbench-test-server/pbench-local/fs-version-001
/var/tmp/pbench-test-server/pbench-local/fs-version-001/pbench-move-results-receive
/var/tmp/pbench-test-server/pbench-local/fs-version-002
/var/tmp/pbench-test-server/pbench-local/fs-version-002/pbench-move-results-receive
/var/tmp/pbench-test-server/pbench-local/quarantine
/var/tmp/pbench-test-server/pbench-local/quarantine/duplicates-001
/var/tmp/pbench-test-server/pbench-local/quarantine/duplicates-002
/var/tmp/pbench-test-server/pbench-local/quarantine/errors-001
/var/tmp/pbench-test-server/pbench-local/quarantine/errors-002
/var/tmp/pbench-test-server/pbench-local/quarantine/md5-001
/var/tmp/pbench-test-server/pbench-local/quarantine/md5-002
--- pbench-local tree state
+++ pbench log file contents
/var/tmp/pbench-test-server/pbench/logs/pbench-audit-archive/pbench-audit-archive.log:curl -XPOST -H Content-Type: application/json http://elasticsearch.example.com:9280/pbench-unittests.pbench-audit-archive.1900-01/status/9a94d44ac59c689e02b50785dd1069ef --data @/tmp/pbench-report-status.NNNN/payload
/var/tmp/pbench-test-server/pbench/logs/pbench-audit-archive/pbench-audit-archive.log:
--- pbench log file contents
+++ test-curl-payload.log file contents
{
    "text": "pbench-audit-archive.run-1900-01-01T00:00:00-UTC(unit-test)\n\nstart-1900-01-01T00:00:00-UTC: archive hierarchy: /var/tmp/pbench-test-server/pbench/archive/fs-version-001\n\n\nBad Controllers:\n\t-rw-rw-r-- 0 Mon Sep 24 17:18:42.0000000000 2018 a-wayward-file.txt\n\t-rw-rw-r-- 0 Mon Sep 24 14:38:32.0000000000 2018 wayward-file.txt\n\n\nController: controller.empty\n\t* No state directories found in this controller directory.\n\t* No tar ball files found in this controller directory.\n\n\nController: controller.unexp_state_dirs\n\t* Unexpected state directories found in this controller directory:\n\t  ++++++++++\n\t  an-unexpected\n\t  unexpected\n\t  ----------\n\t* No tar ball files found in this controller directory.\n\n\nController: controller.wont_index\n\t* No tar ball files found in this controller directory.\n\n\nController: controller00\n\t* Unexpected symlinks in controller directory:\n\t  ++++++++++\n\t  an-unexpected-symlink -> /dev/null\n\t  unexpected-symlink -> /dev/null\n\t  ----------\n\t* Unexpected files in controller directory:\n\t  ++++++++++\n\t  .prefix\n\t  unexpected-file\n\t  ----------\n\t* Prefix directory, .prefix, is not a directory\n\n\nController: controller01\n\t* Unexpected file system objects in .prefix directory:\n\t  ++++++++++\n\t  a-unexpected\n\t  unexpected\n\t  ----------\n\t* Wrong prefix file names found in /.prefix directory:\n\t  ++++++++++\n\t  prefix.DUPLICATE__NAME.1.benchmark-result-medium_1900-01-01T00:00:00.tar.xz\n\t  prefix.benchmark-result-medium_1900-01-01T00:00:00.tar.xz\n\t  ----------\n\n\nend-1900-01-01T00:00:00-UTC\n", 
    "@timestamp": "1900-01-01T00:00:00", 
    "name": "pbench-audit-archive", 
    "doctype": "status"
}
--- test-curl-payload.log file contents
