#!/bin/bash

tool_output_dir=$1

oc_component="rc nodes ep pods pv pvc svc cs"

oc_info_file() {
    for component in $oc_component; do
        if [ "$component" == "nodes" ] || [ "$component" == "cs" ] ; then
            sleep 5
            oc get $component -o wide -w | unbuffer -p awk '{print strftime("%Y-%m-%d %H:%M:%S"),$0}' >> $tool_output_dir/$component.txt &
        else
            sleep 5
            oc get --all-namespaces $component -o wide -w | unbuffer -p awk '{print strftime("%Y-%m-%d %H:%M:%S"),$0}' >> $tool_output_dir/$component.txt &
        fi
    done
}
oc_info_file

